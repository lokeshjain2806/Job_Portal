{% extends "base.html" %}
{% load crispy_forms_tags %}
{% block title %} Search Results {% endblock title %}
{% block content %}
  <div class="container mt-5">
    <h1 class="text-center mb-4 display-4">Search Results for "{{ query }}"</h1>
    <form method="get" class="d-flex" action="{% url 'search' %}">
      <input class="form-control me-2" type="search" placeholder="Search By Job Title" aria-label="job_title"
             name="job_title" id="job_title" value="{{ query }}">
      <button class="btn btn-warning" type="submit">Search</button>
    </form>
    {% if data %}
      <div class="row">
        {% for job in data %}
          <div class="col-md-4">
            <div class="card mb-4">
              <div class="card-body">
                <h5 class="card-title text-center bg-primary text-white p-2">{{ job.job_title }}</h5>
                <h6 class="card-subtitle mb-2 text-muted">{{ job.company_name }}</h6>
                <p class="card-text"><strong>Location:</strong> {{ job.location }}</p>
                <p class="card-text"><strong>Job Type:</strong> {{ job.get_job_type_display }}</p>
                <p class="card-text"><strong>Industry:</strong> {{ job.get_industry_category_display }}</p>
                <p class="card-text"><strong>Salary:</strong> Rs.{{ job.salary }}</p>
                <p class="card-text"><strong>Requirements:</strong> {{ job.job_requirements }}</p>
                <p class="card-text"><strong>Education Requirements:</strong> {{ job.education_requirements }}</p>
                <p class="card-text"><strong>Experience Level:</strong> {{ job.experience_level }}</p>
                <p class="card-text"><strong>Contact Information:</strong> {{ job.contact_information }}</p>
                <p class="card-text"><strong>Benefits:</strong> {{ job.benefits }}</p>
                <p class="card-text"><strong>Skills and Qualities:</strong> {{ job.skills_and_qualities }}</p>
                <div class="d-grid gap-2">
                  {% if job.id in applied_jobs %}
                    <span class="text-success"> Already Applied</span>
                  {% else %}
                    <a href="{% url 'JobApplicationCreateView' job_id=job.id %}" class="btn btn-primary">Apply</a>
                  {% endif %}
                </div>
              </div>
            </div>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <div class="alert alert-info" role="alert" style="background-color: #f3f3f3;">
        No jobs available for "{{ query }}".
      </div>
    {% endif %}
  </div>
{% endblock content %}
